# CallAnnotate Docker Volume Structure

Эта папка представляет структуру Docker Volume для CallAnnotate, обеспечивающую 
файловую очередь обработки и хранение промежуточных результатов.

## Структура папок

### `queue/` - Файловая очередь обработки
- `incoming/` - Поступающие аудиофайлы для обработки
- `processing/` - Файлы в процессе обработки (с таймстампами)
- `completed/` - Успешно обработанные файлы 
- `failed/` - Файлы с ошибками обработки
- `archived/` - Архивированные задачи (автоочистка)

### `intermediate/` - Промежуточные результаты этапов
- `diarization/` - Результаты диаризации (.rttm файлы)
- `transcription/` - Результаты транскрипции (.json)
- `recognition/` - Результаты распознавания голосов (.json)
- `carddav/` - Результаты связывания контактов (.json)

### `outputs/` - Финальные результаты
- `pending/` - Готовые JSON отчёты к выдаче
- `delivered/` - Выданные отчёты

### `models/` - Модели и эмбеддинги
- `whisper/` - Модели Whisper для ASR
- `pyannote/` - Модели Pyannote для диаризации
- `embeddings/` - Голосовые эмбеддинги (.vec файлы)

### `logs/` - Логи и мониторинг
- `tasks/` - Логи по задачам обработки
- `system/` - Системные логи приложения
- `queue/` - Логи очереди и восстановления

## Принципы работы

1. **Атомарные операции**: Файлы перемещаются между папками атомарно
2. **Восстановление**: При перезапуске незавершённые задачи возвращаются в очередь
3. **Таймстампы**: Все операции маркируются временными метками
4. **Логирование**: Полная трассировка обработки каждого файла

## Монтирование в Docker

```
docker run -v ./volume:/app/volume callannotate:latest

```